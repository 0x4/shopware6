<!--- auto generated by `bin/console docs:generate-scripts-reference` in the shopware project, don't edit this file manually -->
# Custom Endpoint script services reference

## [services.writer (`Shopware\Core\Framework\DataAbstractionLayer\Facade\RepositoryWriterFacade`)](https://github.com/shopware/platform/blob/trunk/src/Core/Framework/DataAbstractionLayer/Facade/RepositoryWriterFacade.php) {#repositorywriterfacade}

The `writer` service allows you to write data, that is stored inside shopware.
Keep in mind that your app needs to have the correct permissions for the data it writes through this service.

### upsert()

* The `upsert()` method allows you to create or update entities inside the database.

    If you pass an `id` in the payload it will do an update if an entity with that `id` already exists, otherwise it will be a create.
* **Returns** [`Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenContainerEvent`](https://github.com/shopware/platform/blob/trunk/src/Core/Framework/DataAbstractionLayer/Event/EntityWrittenContainerEvent.php)

    The WriteEvents that were generated by executing the `upsert()`.
* **Arguments:**
    * *`string`* **entityName**: The name of the entity you want to upsert, e.g. `product` or `media`.
    * *`array`* **payload**: The payload you want to upsert, as a list of associative arrays, where each associative array represents the payload for one entity.
* **Examples:**
    * Create a new entity.

        ```twig
        {% do services.writer.upsert('tax', [
		    { 'name': 'new Tax', 'taxRate': 99.9 }
		]) %}
        ```
    * Update an existing entity.

        ```twig
        {% do services.writer.upsert('product', [
		    { 'id':  hook.productId, 'active': true }
		]) %}
        ```
### delete()

* The `delete()` method allows you to delete entities from the database.

    
* **Returns** [`Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenContainerEvent`](https://github.com/shopware/platform/blob/trunk/src/Core/Framework/DataAbstractionLayer/Event/EntityWrittenContainerEvent.php)

    The WriteEvents that were generated by executing the `delete()`.
* **Arguments:**
    * *`string`* **entityName**: The name of the entity you want to delete, e.g. `product` or `media`.
    * *`array`* **payload**: The primary keys of the entities you want to delete, as a list of associative arrays, associative array represents the primary keys for one entity.
* **Examples:**
    * Delete an entity.

        ```twig
        {% do services.writer.delete('product', [
		    { 'id':  hook.productId }
		]) %}
        ```
### sync()

* The `sync()` method allows you to execute updates and deletes to multiple entities in one method call.

    
* **Returns** [`Shopware\Core\Framework\Api\Sync\SyncResult`](https://github.com/shopware/platform/blob/trunk/src/Core/Framework/Api/Sync/SyncResult.php)

    The result of the `sync()`.
* **Arguments:**
    * *`array`* **payload**: All operations that should be executed.
* **Examples:**
    * Update an entity and delete another one with one `sync()` call.

        ```twig
        {% set payload = [
		    {
		        'entity': 'product',
		        'action': 'upsert',
		        'payload': [
		            { 'id':  hook.updateProductId, 'active': true }
		        ]
		    },
		    {
		        'entity': 'product',
		        'action': 'delete',
		        'payload': [
		        { 'id':  hook.deleteProductId }
		    ]
		    },
		] %}
		
		{% do services.writer.sync(payload) %}
        ```
_________
## [services.storefront (`Shopware\Storefront\Framework\Script\Facade\StorefrontServicesFacade`)](https://github.com/shopware/platform/blob/trunk/src/Storefront/Framework/Script/Facade/StorefrontServicesFacade.php) {#storefrontservicesfacade}

The `storefront` service allows you render a twig template and to ensure that the current customer is logged in.


### render()

* The `render()` method allows you to render a twig view with the parameters you provide.

    
* **Returns** `Symfony\Component\HttpFoundation\Response`

    The `Response` with the rendered template as the content.
* **Arguments:**
    * *`string`* **view**: The name of the twig template you want to render e.g. `@Storefront/storefront/page/content/detail.html.twig`
    * *`array`* **parameters**: The parameters you want to pass to the template, ensure that you pass the `page` parameter from the hook to the templates.

        Default: `array (
)`
* **Examples:**
    * Fetch a product, add it to the page and return a rendered response.

        ```twig
        {% set product = services.store.search('product', { 'ids': [productId]}).first %}
		
		{% do hook.page.addExtension('myProduct', product) %}
		
		{% do hook.setResponse(
		    services.storefront.render('@MyApp/storefront/page/custom-page/index.html.twig', { 'page': hook.page })
		) %}
        ```
_________
